# Описание 
Тестовый проект по покрытию автотестами приложения `todo-app`
Проект написан на языке Kotlin с использованием фреймворка JUnit5, библиотек AssertJ, Okhttp и khttp.

### Подготовка окружения и запуск тестов 
Запустить тестируемое приложение командой 
```bash
docker run -p 8080:4242 -e VERBOSE=1 todo-app
```
Запустить тесты командой
```bash
 mvn clean test
```
В консоли будет отображен результат запуска: статистика по запущенным/успешным/проваленным тестам.

Также тесты можно запустить из IDEA, статистика выполнения будет более наглядной.

### Особенности реализации
Сетевые запросы и ответы логируются в консоль.

Реализована очистка тестовых данных после выполнения каждого тестового класса на основе списков созданных todo.

### Известные проблемы
- В общем запуске не проходит тест `checkCreateTodoTest`. Причину исследовать не хватило времени. 
- В логгере не реализован вывод названия метода, вызывающего запись.
- khttp был выбран за простоту использования в результате непродолжительного поиска альтернативных http-клиентов. На этапе имплементации ws-клиента было выяснено, что веб-сокеты khttp не поддерживает, так в проекте появился Okhttp. Для унификации и минимизации количества используемых библиотек класс `ApiClient` целесообразно переписать на Okhttp.

## Обнаруженные дефекты

### Возможно создание дубликата Todo путем редактирования существующей записи.

**Описание**

Создание todo с одинаковыми id невозможно, попытка проваливается с ошибкой валидации, срабатывает проверка уникальности поля id. При этом возможно отредактировать уже имеющуюся todo и получить дубликаты todo. Покрытие в editTodoDuplicateTest. 

**Воспроизведение**

- Создать две Todo (todo1 и todo2)
- Отправить PUT запрос для редактирования todo1 и id от todo2 в теле запроса.

**ФР**

В списке todo присутствуют две записи с одинаковым id.

**ОР**
 
Ошибка валидации (аналогичная ошибке при попытке создания дубликата todo)

### Невалидный ответ на запрос на редактирование todo с невалидными значениями.
**Описание**

Запрос на редактирование todo с невалидными данными в запросе возвращает ошибку 401.

**Воспроизведение**
- Создать todo
- Отправить запрос на редактирование с невалидными данными (поля со значением null,примеры данных в тесте editTodoValidationTest).
- 
**ФР**

В ответ возвращается код 401 (Unauthorized)

**ОР**

Ответ 400 (Bad request)

**Примечание**

Если добавить в запрос на редактирование заголовок авторизации (аналогично запросу на удаление), по сработает валидация тела запроса и вернется ошибка 400.